USE ADM_Club;

CREATE TABLE CLIENTE

(
	ID				INT				NOT NULL IDENTITY(1,1),
	NOME			VARCHAR(50)		NOT NULL,
	SOBRENOME		VARCHAR(100)	NULL,
	N_DEPENDENTES	INT				NULL,
	DTASSOCIACAO	DATETIME		NOT NULL,
	CONSTRAINT PK_CLIENTE PRIMARY KEY(ID)
);

CREATE TABLE TIPO_DOCUMENTO

(
	ID			INT				NOT NULL IDENTITY(1,1),
	NOME		VARCHAR(50)		NOT NULL,
	DESCRICAO	VARCHAR(500)	NULL,
	CONSTRAINT PK_TIPO_DOCUMENTO PRIMARY KEY(ID)
);

CREATE TABLE DOCUMENTO

(
	ID					INT			NOT NULL IDENTITY(1,1),
	ID_CLIENTE			INT			NOT NULL,
	ID_TIPO_DOCUMENTO	INT			NOT NULL,
	NUMERO				VARCHAR(20)	NOT NULL,
	DTEMISSAO			DATE		NULL,
	VALIDADE			DATE		NULL,
	CONSTRAINT PK_DOCUMENTO PRIMARY KEY(ID),
	CONSTRAINT FK_DOCUMENTO_CLIENTE FOREIGN KEY(ID_CLIENTE)
		REFERENCES CLIENTE(ID),
	CONSTRAINT FK_DOCUMENTO_TIPO_DOCUMENTO FOREIGN KEY(ID_TIPO_DOCUMENTO)
		REFERENCES TIPO_DOCUMENTO(ID)
);

CREATE TABLE TIPO_ENDERECO

(
	ID			INT				NOT NULL IDENTITY(1,1),
	NOME		VARCHAR(50)		NOT NULL,
	DESCRICAO	VARCHAR(500)	NULL,
	CONSTRAINT PK_TIPO_ENDERECO PRIMARY KEY(ID)
);

CREATE TABLE ESTADO

(
	ID		INT			NOT NULL IDENTITY(1,1),
	NOME	VARCHAR(50)	NOT NULL,
	CONSTRAINT PK_ESTADO PRIMARY KEY(ID)
);

CREATE TABLE CIDADE

(
	ID			INT				NOT NULL IDENTITY(1,1),
	ID_ESTADO	INT				NOT NULL,
	NOME		VARCHAR(50)		NOT NULL,
	CONSTRAINT PK_CIDADE PRIMARY KEY(ID),
	CONSTRAINT FK_CIDADE_ESTADO FOREIGN KEY(ID_ESTADO)
		REFERENCES ESTADO(ID)
);

CREATE TABLE ENDERECO

(
	ID					INT				NOT NULL IDENTITY(1,1),
	ID_CLIENTE			INT				NOT NULL,
	ID_TIPO_ENDERECO	INT				NOT NULL,
	ID_CIDADE			INT				NOT NULL,
	TIPO_LOGRADOURO		VARCHAR(20)		NOT NULL,
	NOME_LOGRADOURO		VARCHAR(50)		NOT NULL,
	COMPLEMENTO			VARCHAR(20)		NULL,
	NUMERO				VARCHAR(10)		NULL,
	BAIRRO				VARCHAR(50)		NOT NULL,
	CEP					VARCHAR(20)		NULL,
	CONSTRAINT PK_ENDERECO PRIMARY KEY(ID),
	CONSTRAINT FK_ENDERECO_CLIENTE FOREIGN KEY(ID_CLIENTE)
		REFERENCES CLIENTE(ID),
	CONSTRAINT FK_ENDERECO_TIPO_ENDERECO FOREIGN KEY(ID_TIPO_ENDERECO)
		REFERENCES TIPO_ENDERECO(ID),
	CONSTRAINT FK_ENDERECO_CIDADE FOREIGN KEY(ID_CIDADE)
		REFERENCES CIDADE(ID)
);

CREATE TABLE MENSALIDADE

(
	ID				INT				NOT NULL IDENTITY(1,1),
	ID_CLIENTE		INT				NOT NULL,
	DTVENCIMENTO	DATE			NOT NULL,
	VALOR			DECIMAL(10,2)	NOT NULL,
	DTPAGAMENTO		DATE			NULL,
	CONSTRAINT PK_MENSALIDADE PRIMARY KEY(ID),
	CONSTRAINT FK_MENSALIDADE_CLIENTE FOREIGN KEY(ID_CLIENTE)
		REFERENCES CLIENTE(ID)
);
